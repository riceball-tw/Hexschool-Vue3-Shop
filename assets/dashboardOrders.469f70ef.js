import{d as w,B as Z,r as A,o as _,l as U,w as E,b as t,s as j,j as z,y as c,z as p,A as B,v as T,C as F,i as C,c as b,F as k,h as H,t as i,n as N,a as L,$ as v}from"./index.996adb43.js";import{_ as P}from"./AppPagination.12545e42.js";import{_ as V}from"./DashboardDeleteModal.91dfe617.js";const W={class:"modal-box w-full max-w-none p-8"},I={class:"text-3xl font-bold mb-8"},Q=["onSubmit"],R={class:"form-control w-full"},G=t("label",{for:"createAt",class:"label"},[t("span",{class:"label-text"},"\u5275\u5EFA\u65E5\u671F")],-1),J={class:"form-control w-full"},K=t("label",{for:"userName",class:"label"},[t("span",{class:"label-text"},"\u806F\u7D61\u4EBA")],-1),X={class:"form-control w-full"},Y=t("label",{for:"userTel",class:"label"},[t("span",{class:"label-text"},"\u96FB\u8A71")],-1),tt={class:"form-control w-full"},et=t("label",{for:"userEmail",class:"label"},[t("span",{class:"label-text"},"\u96FB\u5B50\u4FE1\u7BB1")],-1),lt={class:"form-control w-full"},st=t("label",{for:"total",class:"label"},[t("span",{class:"label-text"},"\u61C9\u4ED8\u91D1\u984D")],-1),nt={class:"input-group"},ot=t("span",null,"\u5143",-1),at={class:"form-control w-full"},it={for:"isEnabled",class:"label"},ut=t("span",{class:"label-text"},"\u662F\u5426\u4ED8\u6B3E",-1),rt={class:"modal-action flex flex-wrap gap-4"},dt=t("button",{class:"btn btn-primary btn-wide",form:"couponModal",type:"submit"},"\u78BA\u8A8D",-1),ct=["onClick"],pt={__name:"OrderModal",props:{order:{type:Object,default(){return{}}}},emits:["confirm","cancel"],setup(g,{emit:u}){const h=g,l=w({});l.value={...h.order};function r(){const a={...l.value};a.create_at=F(l.value.create_at),u("confirm",a)}return Z(()=>{if(l.value.create_at){const a=new Date(l.value.create_at*1e3).toISOString(),s=new Date(a).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-");l.value.create_at=s}}),(a,s)=>{const f=A("vue-final-modal");return _(),U(f,T(a.$attrs,{classes:"flex justify-center items-center"}),{default:E(({close:m})=>[t("div",W,[t("div",I,[j(a.$slots,"title")]),t("form",{id:"couponModal",onSubmit:z(()=>{m(),r()},["prevent"])},[t("div",R,[G,c(t("input",{id:"createAt","onUpdate:modelValue":s[0]||(s[0]=o=>l.value.create_at=o),type:"date",class:"input input-bordered w-full",placeholder:"\u8ACB\u8F38\u5165\u8A02\u55AE\u5275\u5EFA\u65E5\u671F\u2026\u2026",required:""},null,512),[[p,l.value.create_at]])]),t("div",J,[K,c(t("input",{id:"userName","onUpdate:modelValue":s[1]||(s[1]=o=>l.value.user.name=o),class:"input input-bordered w-full",type:"text",placeholder:"\u8ACB\u8F38\u5165\u540D\u7A31\u2026\u2026",required:""},null,512),[[p,l.value.user.name]])]),t("div",X,[Y,c(t("input",{id:"userTel","onUpdate:modelValue":s[2]||(s[2]=o=>l.value.user.tel=o),class:"input input-bordered w-full",type:"tel",placeholder:"\u8ACB\u8F38\u5165\u96FB\u8A71\u2026\u2026",required:""},null,512),[[p,l.value.user.tel]])]),t("div",tt,[et,c(t("input",{id:"userEmail","onUpdate:modelValue":s[3]||(s[3]=o=>l.value.user.email=o),class:"input input-bordered w-full",type:"email",placeholder:"\u8ACB\u8F38\u5165\u96FB\u5B50\u4FE1\u7BB1\u2026\u2026",required:""},null,512),[[p,l.value.user.email]])]),t("div",lt,[st,t("div",nt,[c(t("input",{id:"total","onUpdate:modelValue":s[4]||(s[4]=o=>l.value.total=o),class:"input input-bordered w-full",min:"0",type:"number",placeholder:"\u8ACB\u8F38\u5165\u61C9\u4ED8\u91D1\u984D\u2026\u2026",required:""},null,512),[[p,l.value.total,void 0,{number:!0}]]),ot])]),t("div",at,[t("label",it,[ut,c(t("input",{id:"isEnabled","onUpdate:modelValue":s[5]||(s[5]=o=>l.value.is_paid=o),class:"toggle toggle-success",type:"checkbox","true-value":!0,"false-value":!1},null,512),[[B,l.value.is_paid]])])])],40,Q),t("div",rt,[dt,t("button",{class:"btn",onClick:o=>m()},"\u53D6\u6D88",8,ct)])])]),_:3},16)}}},mt={class:"flex justify-between w-full mb-8"},_t=t("h1",{class:"text-4xl font-bold"},"\u5F8C\u53F0\u8A02\u55AE\u8CC7\u8A0A",-1),ht={class:"overflow-x-auto w-full"},ft={class:"table table-zebra w-full"},bt=t("thead",{class:"sticky top-0 z-20"},[t("tr",null,[t("th",null,"\u7D22\u5F15"),t("th",null,"\u8A02\u55AE\u7DE8\u865F"),t("th",null,"\u8A02\u55AE\u65E5\u671F"),t("th",null,"\u806F\u7D61\u4EBA / \u96FB\u8A71"),t("th",null,"\u96FB\u5B50\u90F5\u4EF6"),t("th",null,"\u61C9\u4ED8\u91D1\u984D"),t("th",null,"\u8A02\u55AE\u72C0\u614B"),t("th",null,"\u884C\u52D5")])],-1),vt={class:"btn-group"},wt=["onClick"],gt=t("svg",{title:"\u7DE8\u8F2F",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[t("path",{d:"M5 19h1.4l8.625-8.625-1.4-1.4L5 17.6ZM19.3 8.925l-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Zm-3.525-.725-.7-.7 1.4 1.4Z"})],-1),$t=[gt],xt=["onClick"],yt=t("svg",{title:"\u522A\u9664",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[t("path",{d:"M7 21q-.825 0-1.412-.587Q5 19.825 5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413Q17.825 21 17 21ZM17 6H7v13h10ZM9 17h2V8H9Zm4 0h2V8h-2ZM7 6v13Z"})],-1),Mt=[yt],qt={__name:"dashboardOrders",setup(g){const u=C("axiosWithAuth"),h=C("$loading"),l=w([]),r=w({});function a(n=1){const d=h.show();u({method:"get",url:`/admin/orders?page=${n}`}).then(e=>{l.value=e.data.orders,r.value=e.data.pagination}).finally(()=>{d.hide()})}function s(n){u({method:"delete",url:`/admin/order/${n}`}).then(()=>{a()})}function f(n){v.show({component:V,bind:{dashboardItem:{title:n.id}},on:{confirm(){s(n.id)}},slots:{title:"\u522A\u9664\u8A02\u55AE"}})}function m(n){u({method:"put",url:`/admin/order/${n.data.id}`,data:{...n}}).then(()=>{a()})}function o(n){v.show({component:pt,bind:{order:{...n}},on:{confirm(d){const e={data:{...d}};m(e)}},slots:{title:"\u7DE8\u8F2F\u8A02\u55AE"}})}function q(n){a(n)}function O(){u({method:"delete",url:"/admin/orders/all"}).then(()=>{a()})}function D(){v.show({component:V,on:{confirm(){O()}},slots:{title:"\u522A\u9664\u7522\u54C1"}})}return a(),(n,d)=>(_(),b(k,null,[t("div",mt,[_t,t("button",{class:"btn btn-error",onClick:d[0]||(d[0]=e=>D())},"\u522A\u9664\u5168\u90E8\u8A02\u55AE")]),t("div",ht,[t("table",ft,[bt,t("tbody",null,[(_(!0),b(k,null,H(l.value,(e,$)=>{var x,y,M;return _(),b("tr",{key:e.id},[t("th",null,i(r.value.current_page===1?$+1:$+1+r.value.current_page*10-10),1),t("td",null,i(e.id),1),t("td",null,i(n.$unitFilters.toReadableDate(e.create_at)),1),t("td",null,i((x=e==null?void 0:e.user)==null?void 0:x.name)+" / "+i((y=e==null?void 0:e.user)==null?void 0:y.tel),1),t("td",null,i((M=e==null?void 0:e.user)==null?void 0:M.email),1),t("td",null,i(n.$unitFilters.currency(e.total)),1),t("td",{class:N(e.is_paid?"text-success":"text-error")},i(e.is_paid?"\u5DF2\u4ED8\u6B3E":"\u672A\u4ED8\u6B3E"),3),t("td",null,[t("div",vt,[t("button",{class:"btn btn-outline btn-square",onClick:S=>o(e)},$t,8,wt),t("button",{class:"btn btn-outline btn-square -ml-px hover:btn-error",onClick:S=>f(e)},Mt,8,xt)])])])}),128))])])]),L(P,{pages:r.value,onPaginationChange:q},null,8,["pages"])],64))}};export{qt as default};
