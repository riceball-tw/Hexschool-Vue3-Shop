import{g as w,t as F}from"./handleFavoriteProduct.918a0d6a.js";import{_ as S}from"./AppPagination.904f6626.js";import{_ as E}from"./AppHero.60a8f05a.js";import{i as Q,d as i,m as H,o as a,c as n,a as x,b as t,n as q,F as y,h as $,t as _,w as N,r as j}from"./index.09624cec.js";const A={class:"container mx-auto flex flex-col gap-8"},W={class:"flex flex-col md:flex-row gap-8 mt-8"},D={class:""},O=t("h2",{class:"sr-only"},"\u7522\u54C1\u5206\u985E",-1),U={class:"menu bg-base-100 min-w-[250px] p-2 rounded-box sticky top-0"},G=["onClick"],I=t("h2",{class:"sr-only"},"\u7522\u54C1\u6E05\u55AE",-1),J=["src","alt"],K={class:"card-body"},R={class:"card-title"},X={class:"badge badge-secondary"},Y={class:"line-through"},tt={class:"font-bold"},et={class:"card-actions justify-end"},ot={class:"btn-group [&>.btn]:border-l-0 [&>.btn:first-child]:border-l"},st=["disabled","onClick"],lt={key:0},at=t("svg",{title:"Pending... \u7B49\u5F85\u5716\u793A",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[t("path",{d:"M7 13.5q.625 0 1.062-.438Q8.5 12.625 8.5 12t-.438-1.062Q7.625 10.5 7 10.5t-1.062.438Q5.5 11.375 5.5 12t.438 1.062Q6.375 13.5 7 13.5Zm5 0q.625 0 1.062-.438.438-.437.438-1.062t-.438-1.062Q12.625 10.5 12 10.5t-1.062.438Q10.5 11.375 10.5 12t.438 1.062q.437.438 1.062.438Zm5 0q.625 0 1.062-.438.438-.437.438-1.062t-.438-1.062Q17.625 10.5 17 10.5t-1.062.438Q15.5 11.375 15.5 12t.438 1.062q.437.438 1.062.438ZM12 22q-2.075 0-3.9-.788-1.825-.787-3.175-2.137-1.35-1.35-2.137-3.175Q2 14.075 2 12t.788-3.9q.787-1.825 2.137-3.175 1.35-1.35 3.175-2.138Q9.925 2 12 2t3.9.787q1.825.788 3.175 2.138 1.35 1.35 2.137 3.175Q22 9.925 22 12t-.788 3.9q-.787 1.825-2.137 3.175-1.35 1.35-3.175 2.137Q14.075 22 12 22Zm0-2q3.35 0 5.675-2.325Q20 15.35 20 12q0-3.35-2.325-5.675Q15.35 4 12 4 8.65 4 6.325 6.325 4 8.65 4 12q0 3.35 2.325 5.675Q8.65 20 12 20Zm0-8Z"})],-1),nt=[at],it={key:1},ct=["onClick"],dt={key:0},rt=t("svg",{title:"Solid Heart \u5BE6\u5FC3\u7684\u611B\u5FC3",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[t("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1),ut=[rt],ht={key:1},_t=t("svg",{title:"Outlined Heart \u7A7A\u5FC3\u7684\u611B\u5FC3",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[t("path",{d:"M0 0h24v24H0V0z",fill:"none"}),t("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"})],-1),vt=[_t],wt={__name:"ShopProducts",setup(gt){const C=Q("axiosWithAuth"),M=Q("$loading"),d=i([]),r=i({}),u=i([]),c=i("all"),k=i([]),p=i(null),b=i(w()),h=i([]),m=10;H(c,e=>{setTimeout(()=>{p.value.scrollIntoView({behavior:"smooth"})},100),e==="all"?(d.value=g(u.value),r.value=v(u.value.length)):(d.value=g(f()),r.value=v(f().length))});function f(e=c.value){return u.value.filter(s=>s.category===e)}function z(e,s=1){h.value=[...h.value,e],C({method:"post",url:"/cart",data:{data:{product_id:e,qty:s}}}).finally(()=>{h.value=h.value.filter(l=>l!==e)})}function L(e,s=m){return Math.round(e/s)}function v(e,s=1){const l=L(e);return{total_pages:l,current_page:s,has_pre:s!==1,has_next:s<l,category:null}}function g(e,s=1){const l=s*m,o=s*m-m;return e.slice(o,l)}function T(e){return[...new Set(e.map(s=>s.category))]}function P(e=1){const s=M.show();C({method:"get",url:"products/all"}).then(l=>{d.value=g(l.data.products,e),u.value=l.data.products,k.value=T(l.data.products),r.value=v(l.data.products.length,e)}).finally(()=>{s.hide()})}function V(e){c.value==="all"?(d.value=g(u.value,e),r.value=v(u.value.length,e)):(d.value=g(f(),e),r.value=v(f().length,e)),setTimeout(()=>{p.value.scrollIntoView({behavior:"smooth"})},100)}function Z(e,s){F(e,s),b.value=w()}return window.addEventListener("storeProducts",()=>{b.value=w(),P()}),P(),(e,s)=>{const l=j("router-Link");return a(),n(y,null,[x(E,{title:"\u6240\u6709\u7522\u54C1",description:"\u4E00\u4E9B\u95DC\u65BC\u9019\u500B\u5546\u5E97\u7684\u63CF\u8FF0\u7684\u63CF\u8FF0\u53EF\u64B0\u5BEB\u65BC\u6B64"}),t("div",A,[t("div",W,[t("div",D,[O,t("ul",U,[t("li",null,[t("button",{class:q({active:c.value==="all"}),onClick:s[0]||(s[0]=o=>c.value="all")},"\u5168\u90E8",2)]),(a(!0),n(y,null,$(k.value,o=>(a(),n("li",{key:o},[t("button",{class:q({active:c.value===o}),type:"button",onClick:B=>c.value=o},_(o),11,G)]))),128))])]),t("div",{ref_key:"galleryElement",ref:p,class:"grid w-full grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},[I,(a(!0),n(y,null,$(d.value,o=>(a(),n("div",{key:o.id,class:"card bg-base-100 shadow-xl"},[t("figure",null,[t("img",{class:"bg-base-200 w-full",src:o.imageUrl,alt:o.title},null,8,J)]),t("div",K,[x(l,{to:{path:`/product/${o.id}`}},{default:N(()=>[t("h2",R,_(o.title),1)]),_:2},1032,["to"]),t("div",X,_(o.category),1),t("p",null,_(o.description),1),t("div",null,[t("div",Y,"NT$ "+_(o.origin_price),1),t("div",tt,"NT$ "+_(o.price),1)]),t("div",et,[t("div",ot,[t("button",{class:"btn btn-outline",disabled:h.value.includes(o.id),onClick:B=>z(o.id)},[h.value.includes(o.id)?(a(),n("div",lt,nt)):(a(),n("div",it,"\u52A0\u5230\u8CFC\u7269\u8ECA"))],8,st),t("button",{class:"btn btn-outline",onClick:()=>{Z(o.id,o.title)}},[b.value.includes(o.id)?(a(),n("span",dt,ut)):(a(),n("span",ht,vt))],8,ct)])])])]))),128))],512)]),x(S,{pages:r.value,onPaginationChange:V},null,8,["pages"])])],64)}}};export{wt as default};
